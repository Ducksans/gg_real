---
file: admin/checkpoints/20251001-1631-UTC_0132-KST.md
title: Guardrail 실패 섹션 재선택 차단
owner: duksan
created: 2025-10-01 16:31 UTC / 2025-10-02 01:32 KST
updated: 2025-10-01 16:45 UTC / 2025-10-02 01:45 KST
status: in_progress
tags: [checkpoint, figma, guardrail]
schemaVersion: 1
description: 런타임/리스너가 Guardrail 실패 섹션을 다시 선택 목록에 추가하지 않도록 수정했다.
---

## Summary

- 초기 init 메시지에서 전체 섹션을 강제로 재선택하던 코드를 제거해 Guardrail FAIL 섹션이 자동 포함되지 않도록 했다.
- Dry Run 결과 처리 시 Guardrail 오류가 있으면 선택 목록을 건드리지 않고 프리뷰 섹션을 비워두도록 `useRuntimeListener`를 조정했다.
- 런타임 `runSchemaDocument`가 Guardrail 실패 시 결과 페이로드의 `sections`와 `slotReport.executedSections`를 비워, 실패 섹션 ID가 다시 UI로 돌아오지 않게 했다.
- Section Store 기본 선택을 비워 두고 단위 테스트(`ui-section-store.test.ts`)를 갱신해 사용자가 수동으로 선택한 섹션만 실행되도록 보장했다.

## Impacted files

- figma-hello-plugin/src/ui/services/io-listener.ts
- figma-hello-plugin/src/runtime/executor/index.ts
- figma-hello-plugin/src/ui/store/sectionStore.ts
- figma-hello-plugin/tests/ui-section-store.test.ts

## Tests

- pnpm --filter gg-figma-plugin test
