---
file: admin/checkpoints/20250924-0614-UTC_1514-KST.md
title: 체크포인트 — 문서 빌드 명령 정비 및 CI 리소스 폭주 대응
owner: duksan
created: 2025-09-24 06:14 UTC / 2025-09-24 15:14 KST
updated: 2025-09-24 09:01 UTC / 2025-09-24 18:01 KST
status: active
tags: [checkpoint, ci, build, stability]
schemaVersion: 1
description: Turborepo 문서 빌드 분리를 완료하고, 안전한 문서 편집 플로우(CLI+웹 UI)를 마련했다.
---

변경 파일
- .github/workflows/build.yml — documents 빌드 스텝을 `pnpm --filter @gg-real/documents run build`, web 빌드 스텝을 `pnpm --filter web run build`로 재구성
- apps/web/package.json — web 빌드 시 문서 패키지를 동일한 안전 명령으로 선행 실행, wiki 편집 의존성(gray-matter) 추가
- apps/web/src/components/graph/DependencyGraph.tsx — 그래프 영역 높이 Tailwind 클래스 오타 수정
- basesettings.md — M2 계획에 그래프 뷰 리디자인 항목 추가 및 상세 계획 문단 정리
- scripts/edit_flow.js — 문서 편집 플로우(start/prepare) CLI 스크립트 신설
- package.json — `edit:start`, `edit:prepare` 실행 스크립트 추가
- admin/runbooks/editing.md — 문서 편집/PR 생성 런북 작성
- apps/web/src/app/admin/wiki/actions.ts — 문서 저장 서버 액션 추가
- apps/web/src/app/admin/wiki/document-editor.tsx — 편집 모드 토글 및 저장 UI 구현
- apps/web/src/app/admin/wiki/page.tsx — 위키 페이지에 DocumentEditor 연결
- apps/web/src/lib/content.ts — 문서 캐시 무효화 헬퍼 추가
- scripts/update_frontmatter_time.js — 런북 상호 참조 추가
- scripts/checkpoint.sh — 런북 상호 참조 추가

- pnpm --filter @gg-real/documents run build
- pnpm run build:web
- pnpm --filter web lint
- pnpm --filter web run build
- node scripts/edit_flow.js start admin/data/README.md --dry-run
- pnpm install --filter web

관찰 메모
- systemd-oomd 로그에서 VS Code(18.4GB)와 터미널(2~4GB)이 압박을 받아 user@1000.service 강제 종료 → 재부팅 진행
- 기존 `pnpm -w --filter` 사용 시 루트 `turbo build`가 함께 호출되어 apps/web Next 빌드까지 병렬 실행됨
