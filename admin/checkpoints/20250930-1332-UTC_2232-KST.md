---
file: admin/checkpoints/20250930-1332-UTC_2232-KST.md
title: Preact UI 패널/스토어 확장 및 CI 검증 추가
owner: duksan
created: 2025-09-30 13:32 UTC / 2025-09-30 22:32 KST
updated: 2025-09-30 13:34 UTC / 2025-09-30 22:34 KST
status: completed
tags: [checkpoint, figma, plugin, preact]
schemaVersion: 1
description: Guardrail/Preview 패널을 Preact 컴포넌트로 전환하고 로그 구조를 개선했으며, CI에 플러그인 빌드·테스트 단계를 추가했다.
---

## Summary

- ExecutionPanel 하위에 GuardrailSummary/TargetSelect 컴포넌트를 도입하고, guardrail·section·preview 전용 스토어를 신설해 신호 기반 상태 관리를 구성했다.
- PreviewControls 패널을 Preact로 구현하며 Before/After, SlotHighlight UI를 포함해 마지막 실행 결과의 프레임·섹션 메타를 시각화했다.
- ResultLog를 guardrail 이슈/메트릭 중심으로 재구성해 경고·오류를 구조화된 형태로 노출하고, CI `build.yml`에 플러그인 빌드·테스트·타입체크 잡을 추가했다.

## Impacted files

- admin/plan/figmaplugin-refactor.md
- .github/workflows/build.yml
- figma-hello-plugin/src/runtime/executor/index.ts
- figma-hello-plugin/src/ui/app.tsx
- figma-hello-plugin/src/ui/components/ExecutionPanel.tsx
- figma-hello-plugin/src/ui/components/ExecutionPanel/GuardrailSummary.tsx
- figma-hello-plugin/src/ui/components/ExecutionPanel/TargetSelect.tsx
- figma-hello-plugin/src/ui/components/PreviewControls/index.tsx
- figma-hello-plugin/src/ui/components/PreviewControls/BeforeAfter.tsx
- figma-hello-plugin/src/ui/components/PreviewControls/SlotHighlight.tsx
- figma-hello-plugin/src/ui/components/ResultLog.tsx
- figma-hello-plugin/src/ui/components/index.ts
- figma-hello-plugin/src/ui/main.tsx
- figma-hello-plugin/src/ui/services/io-listener.ts
- figma-hello-plugin/src/ui/store/guardrailStore.ts
- figma-hello-plugin/src/ui/store/index.ts
- figma-hello-plugin/src/ui/store/logStore.ts
- figma-hello-plugin/src/ui/store/previewStore.ts
- figma-hello-plugin/src/ui/store/sectionStore.ts
- figma-hello-plugin/src/ui/styles/app.css

## Follow-ups

- [ ] GuardrailSummary와 ResultLog에서 guardrail metrics를 그래프나 배지 형태로 확장해 상태 변화를 한눈에 확인할 수 있도록 개선.
- [ ] PreviewControls에 실시간 포커스/하이라이트 요청(postMessage) 연동을 추가해 프레임 이동 자동화를 지원.
- [ ] sectionStore와 schemaStore를 연동해 다중 섹션 실행 시 선택 상태와 병합 스키마를 동기화.
